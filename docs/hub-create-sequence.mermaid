sequenceDiagram
    actor Client
    participant Controller as HubWebController
    participant Service as HubService
    participant Hub as Hub (Entity)
    participant Repository as HubRepository

    Client->>Controller: POST /api/v1/hub<br/>(CreateHubReq)
    activate Controller


    Note over Controller: DTO → Command 변환
    Controller->>Service: create(CreateHubCommand)
    activate Service
    
    Service->>Hub: Hub.of(name, address)
    activate Hub
    Note right of Hub: 생성 + 검증 + Domain Event 발행
    Hub-->>Service: Hub
    deactivate Hub
    
    Service->>Repository: save(hub)
    activate Repository
    Repository-->>Service: saved Hub
    deactivate Repository

    
    Note over Service: Domain → DTO 변환<br/>(HubRes.from)
    
    Service-->>Controller: HubRes
    deactivate Service
    
    Controller-->>Client: 201 Created<br/>ApiRes<HubRes>
    deactivate Controller
